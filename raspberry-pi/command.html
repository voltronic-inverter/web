<!DOCTYPE html>
<html>
<head>
  <link rel="shortcut icon"type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjMDAwMDAwIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB2aWV3Qm94PSIwIDAgOC40NjY2NjY1IDguNDY2NjY2OSIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtMjg4LjUzMzMyKSI+PHBhdGggc3R5bGU9IiIgZD0ibSA1LjE2MjEwNzQsMjkzLjA1MzAxIC0wLjIzMjE5MywwLjEyNjg1IGEgMC43OTM3NSwwLjc5Mzc1IDAgMCAxIC0wLjk4Mjg4LDEuMTIwODYgMC4wOTQ3NDQxNSwwLjA5NDc0NDE1IDAgMCAwIC0wLjA5Mzg3LDAuMTYxOTQgbCAwLjgwMDc5NjEsMC42NDk3NSAtMC4xNTQ0MzYsLTAuNTI3NyBhIDEuMDU4MzMzMywxLjA1ODMzMzMgMCAwIDAgMC42NjI1ODEsLTEuNTMxNyB6IiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPjwvcGF0aD48cGF0aCBzdHlsZT0iIiBkPSJtIDQuNjEzNDk5MiwyOTIuNjU4MTUgLTAuODAwNzk3LC0wLjY0OTc1IDAuMTU0NDM2LDAuNTI3NyBhIDEuMDU4MzMzMywxLjA1ODMzMzMgMCAwIDAgLTAuNjYyNTgxLDEuNTMxNyBsIDAuMjMyMTk0MSwtMC4xMjY4NSBhIDAuNzkzNzUsMC43OTM3NSAwIDAgMSAwLjk4Mjg3OSwtMS4xMjA4NyAwLjA5NDc0NDE1LDAuMDk0NzQ0MTUgMCAwIDAgMC4wOTM4NjksLTAuMTYxOTMgeiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIj48L3BhdGg+PHBhdGggc3R5bGU9IiIgZD0ibSAxLjg1MjA4MzQsMjg5LjA2MjQ5IGEgMC41MjkxNjY2NywwLjUyOTE2NjY3IDAgMCAwIC0wLjUyOTE2NjcsMC41MjkxNyBIIDAuNTI5MTY2NjMgdiAwLjI2NDU4IGEgMC4yNjQ1ODUsMC4yNjQ1ODUgMCAwIDEgMCwwLjUyOTE3IHYgMC4yNjQ1OCBIIDEuMzIyOTE2NyB2IDQuMjMzMzMgSCAwLjUyOTE2NjYzIHYgMC4yNjQ1OSBhIDAuMjY0NTg1LDAuMjY0NTg1IDAgMCAxIDAsMC41MjkxNiB2IDAuMjY0NTkgSCAxLjMyMjkxNjcgYSAwLjUyOTE2NjY3LDAuNTI5MTY2NjcgMCAwIDAgMC41MjkxNjY3LDAuNTI5MTYgaCA0Ljc2MjUgYSAwLjUyOTE2NjY3LDAuNTI5MTY2NjcgMCAwIDAgMC41MjkxNjY3LC0wLjUyOTE2IGggMC43OTM3NSB2IC0wLjI2NDU5IGEgMC4yNjQ1ODUsMC4yNjQ1ODUgMCAwIDEgMCwtMC41MjkxNiB2IC0wLjI2NDU5IGggLTAuNzkzNzUgdiAtNC4yMzMzMyBoIDAuNzkzNzUgdiAtMC4yNjQ1OCBhIDAuMjY0NTg1LDAuMjY0NTg1IDAgMCAxIDAsLTAuNTI5MTcgdiAtMC4yNjQ1OCBoIC0wLjc5Mzc1IGEgMC41MjkxNjY2NywwLjUyOTE2NjY3IDAgMCAwIC0wLjUyOTE2NjcsLTAuNTI5MTcgeiBtIDAsMC4yNjQ1OCBoIDQuNzYyNSBhIDAuMjY0NTgzMzYsMC4yNjQ1ODMzNiAwIDAgMSAwLjI2NDU4MzMsMC4yNjQ1OSB2IDYuMzUgYSAwLjI2NDU4MzM2LDAuMjY0NTgzMzYgMCAwIDEgLTAuMjY0NTgzMywwLjI2NDU4IGggLTQuNzYyNSBBIDAuMjY0NTgzMzYsMC4yNjQ1ODMzNiAwIDAgMSAxLjU4NzUsMjk1Ljk0MTY2IHYgLTYuMzUgYSAwLjI2NDU4MzM2LDAuMjY0NTgzMzYgMCAwIDEgMC4yNjQ1ODM0LC0wLjI2NDU5IHogbSAtMC44NjQ1NDczMywwLjUyOTE3IEggMS4zMjI5MTY3IHYgMC41MjkxNyBIIDAuOTg3NTM2MDcgYSAwLjUyOTE2NjY3LDAuNTI5MTY2NjcgMCAwIDAgMCwtMC41MjkxNyB6IG0gNi4xNTYyMTQwMywwIGggMC4zMzUzODA1IGEgMC41MjkxNjY2NywwLjUyOTE2NjY3IDAgMCAwIDAsMC41MjkxNyBIIDcuMTQzNzUwMSBaIG0gLTYuMTU2MjE0MDMsNS4yOTE2NyBIIDEuMzIyOTE2NyB2IDAuNTI5MTYgSCAwLjk4NzUzNjA3IGEgMC41MjkxNjY2NywwLjUyOTE2NjY3IDAgMCAwIDAsLTAuNTI5MTYgeiBtIDYuMTU2MjE0MDMsMCBoIDAuMzM1MzgwNSBhIDAuNTI5MTY2NjcsMC41MjkxNjY2NyAwIDAgMCAwLDAuNTI5MTYgSCA3LjE0Mzc1MDEgWiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIj48L3BhdGg+PHBhdGggc3R5bGU9Im9wYWNpdHk6MTtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjAuMDI2NDU4MzM7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgZD0ibSAyLjExNjY2NjcsMjg5Ljg1NjI0IHYgMS4zMjI5MiBoIDQuMjMzMzMzNCB2IC0xLjMyMjkyIHogbSAwLjI2NDU4MzMsMC4yNjQ1OCBoIDMuNzA0MTY2NyB2IDAuNzkzNzUgSCAyLjM4MTI1IFoiPjwvcGF0aD48L2c+PC9zdmc+">
</head>
<body onload="setInputSelect()">

<div>
  <h2>Enter command in the box</h2>
  <input type="text" id="commandInputBox" value="QPIGS">
  <input type="radio" id="usb" name="inputSelect" value="usb" onchange="handleInputChange();">
  <label for="usb">USB</label>
  <input type="radio" id="serial" name="inputSelect" value="serial" onchange="handleInputChange();">
  <label for="serial">Serial</label><br>
  <button type="button" onclick="runCommand()">Execute</button>
  <div id="result"></div>
</div>

<script>
function setInputSelect() {
  if (typeof(Storage) !== "undefined") {
    if (localStorage.inputSelectLast) {
      if (localStorage.inputSelectLast == "usb") {
        document.getElementById("usb").checked = true;
      } else if (localStorage.inputSelectLast == "serial") {
        document.getElementById("serial").checked = true;
      }
    }
  }
}

function handleInputChange() {
  if (typeof(Storage) !== "undefined") {
    if (document.getElementById("usb").checked) {
      localStorage.inputSelectLast = "usb";
    } else if (document.getElementById("serial").checked) {
      localStorage.inputSelectLast = "serial";
    }
  }
}

function runCommand() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4)
      if (this.status == 200) {
        document.getElementById("result").innerHTML += this.responseText + "<br/>";
      } else if (this.status == 400) {
        window.alert("invalid input");
      } else if (this.status >= 500) {
        window.alert(this.responseText);
      }
    }
  };

  if (document.getElementById("usb").checked) {
    xhttp.open("POST", "/voltronic/usb", true);
    xhttp.send(document.getElementById("commandInputBox").value);
  } else if (document.getElementById("serial").checked) {
    xhttp.open("POST", "/voltronic/serial", true);
    xhttp.send(document.getElementById("commandInputBox").value);
  } else {
    window.alert("You must select either USB or serial");
  }
}
</script>
</body>
</html>
